<template>

    <lightning-card>
        <div slot="title">
            <div class="slds-media">
                <div class="slds-media__figure">
                    <lightning-icon icon-name="standard:product_required" size="large"></lightning-icon>
                </div>
                <div class="slds-media__body">
                    <h3>Søk om ny tilgang</h3>
                    <p class="slds-page-header__name-meta">
                        Velg den tilgangen du trenger, og send inn søknad om å få den.
                    </p>
                </div>
            </div>
        </div>

        <div style="min-height: 150px" class="slds-is-relative slds-var-m-horizontal_medium">

            <!-- AVAILABLE PERMISSIONS -->

            <div class="slds-section slds-is-open">
                <h3 class="slds-section__title">
                    <button aria-controls="available-permissions" aria-expanded="true"
                        class="slds-button slds-section__title-action">
                        <lightning-icon icon-name="utility:chevrondown" alternative-text="Chevron Down"
                            title="Chevron Down" size="x-small">
                        </lightning-icon>
                        <span class="slds-truncate slds-var-m-left_xx-small" title="Section Title">Available
                            Permissions</span>
                    </button>
                </h3>
                <div aria-hidden="false" class="slds-section__content" id="available-permissions">
                    <lightning-tree-grid columns={columns} data={availablePermissions} key-field="permsetId">
                    </lightning-tree-grid>
                </div>
            </div>

            <!-- PERMISSIONS IN REVIEW -->

            <div class="slds-section slds-is-open">
                <h3 class="slds-section__title">
                    <button aria-controls="permissions-in-review" aria-expanded="true"
                        class="slds-button slds-section__title-action">
                        <lightning-icon icon-name="utility:chevrondown" alternative-text="Chevron Down"
                            title="Chevron Down" size="x-small">
                        </lightning-icon>
                        <span class="slds-truncate slds-var-m-left_xx-small" title="Section Title">Permissions in
                            Review</span>
                    </button>
                </h3>
                <div aria-hidden="false" class="slds-section__content" id="permissions-in-review">
                    <lightning-tree-grid columns={columns} data={permissionsInReview} key-field="permsetId"
                        hide-checkbox-column>
                    </lightning-tree-grid>
                </div>
            </div>

            <!-- ASSIGNED PERMISSIONS -->

            <div class="slds-section slds-is-open">
                <h3 class="slds-section__title">
                    <button aria-controls="assigned-permission" aria-expanded="true"
                        class="slds-button slds-section__title-action">
                        <lightning-icon icon-name="utility:chevrondown" alternative-text="Chevron Down"
                            title="Chevron Down" size="x-small">
                        </lightning-icon>
                        <span class="slds-truncate slds-var-m-left_xx-small" title="Section Title">Assigned
                            Permissions</span>
                    </button>
                </h3>
                <div aria-hidden="false" class="slds-section__content" id="assigned-permission">
                    <lightning-tree-grid columns={columns} data={assignedPermissions} key-field="permsetId"
                        hide-checkbox-column>
                    </lightning-tree-grid>
                </div>
            </div>

            <lightning-tree-grid columns={columns} data={assignedPermissions} key-field="permsetId"
                hide-checkbox-column>
            </lightning-tree-grid>

        </div>

        <!-- LOADING AND INFO/ERROR TEXT -->
        <!-- ________________________________________________________________________ -->
        <div if:true={loading} class="slds-scrollable">
            <lightning-spinner alternative-text="Loading" size="large"></lightning-spinner>
        </div>
        <div if:true={error} class="slds-m-top_large">
            <div class="slds-text-heading_large slds-align_absolute-center">Feil
            </div>
            <div class="slds-text-color_destructive slds-align_absolute-center slds-m-around_x-large">{errorMsg}</div>
        </div>

    </lightning-card>
</template>